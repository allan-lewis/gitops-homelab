---
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage
  namespace: default
  labels:
    app.kubernetes.io/name: homepage
data:
  kubernetes.yaml: |
    mode: cluster
  settings.yaml: |
    title: "Allan's Home Lab"
    headerStyle: underlined
    useEqualHeights: true
    layout:
      Home Lab Management:
        style: "row"
        columns: 4
      Dev Ops:
        style: "row"
        columns: 4
      GitHub:
        style: "row"
        columns: 2
      GitOps:
        style: "row"
        columns: 2
    theme: "dark"
    color: "slate"
  custom.css: ""
  custom.js: ""
  bookmarks.yaml: |
    - GitHub:
        - Allan's Home Lab:
          - abbr: AHL
            href: https://github.com/allan-lewis/allans-home-lab
        - Gitops Home Lab:
          - abbr: GOH
            href: https://github.com/allan-lewis/gitops-homelab
    - GitOps:
        - Doppler:
          - abbr: DOP
            href: https://dashboard.doppler.com/workplace/f4e646dd70eec9c4d331/projects/default
        - Renovate:
          - abbr: REN
            href: https://developer.mend.io/github/allan-lewis
  services.yaml: |
    - Home Lab Management:
        - Canopus:
            icon: https://styles.redditmedia.com/t5_23wawa/styles/communityIcon_4dwn4v5j0f641.png?width=256&v=enabled&s=27560fbcc6159fe0c23f4a3e5366223954d32509
            href: https://canopus.hosts.allanshomelab.com
            description: NAS (local backup)
        - Guacamole:
            icon: guacamole.png
            href: https://guacamole.allanshomelab.com/guacamole
            description: Remote connection gateway
            namespace: guacamole
            app: guacamole
        - Longhorn:
            icon: longhorn.png
            href: https://longhorn.k8s.allanshomelab.com
            description: Distributed k8s storage
            namespace: longhorn-system
            app: longhorn
        - Polaris:
            icon: proxmox.png
            href: https://polaris.hosts.allanshomelab.com
            description: Hypervisor
            widget:
              type: proxmox
              url: https://polaris.hosts.allanshomelab.com
              username: {{HOMEPAGE_VAR_POLARIS_USERNAME}}
              password: {{HOMEPAGE_VAR_POLARIS_PASSWORD}}
              fields: ['vms', 'resources.cpu', 'resources.mem']
        - Portainer:
            icon: portainer.png
            href: https://portainer.k8s.allanshomelab.com
            description: Container management
            namespace: portainer
            app: portainer
        - Procyon:
            icon: truenas.png
            href: https://procyon.hosts.allanshomelab.com
            description: NAS (offsite backup)
            namespace:
            app:
            server:
            container:
            widget:
              type: truenas
              url: https://procyon.hosts.allanshomelab.com
              username: admin
              password: "{{HOMEPAGE_VAR_TRUENAS_PASSWORD}}"
        - Rancher:
            icon: rancher.png
            href: https://rancher.k8s.allanshomelab.com
            description: Kubernetes management platform
            namespace: cattle-system
            app: rancher
            podSelector: app = rancher
        - Rigel:
            icon: truenas.png
            href: https://rigel.hosts.allanshomelab.com
            description: NAS
            namespace:
            app:
            server:
            container:
            widget:
              type: truenas
              url: https://rigel.hosts.allanshomelab.com
              username: root
              password: "{{HOMEPAGE_VAR_TRUENAS_PASSWORD}}"
    - Dev Ops:
        - Alertmanager:
            icon: alertmanager.png
            href: https://alerts.k8s.allanshomelab.com
            description: Monitoring system
            namespace: kube-prometheus-stack
            app: alertmanager
        - Argo CD:
            icon: argo-cd.png
            href: https://argocd.nonprod.allanshomelab.com
            description: CD tool for Kubernetes
            namespace: argocd
            app: argocd-server
            widget:
              type: argocd
              url: https://argocd.nonprod.allanshomelab.com
              key: "{{HOMEPAGE_VAR_ARGO_CD_KEY}}"
              fields: ['apps', 'healthy', 'synced']
        - Gatus:
            icon: gatus.png
            href: https://gatus.docker.allanshomelab.com
            description: Health dashboard
            server: mizar
            container: gatus
            widget:
              type: gatus
              url: https://gatus.docker.allanshomelab.com
        - Grafana:
            icon: grafana.png
            href: https://grafana.allanshomelab.com
            description: Operational dashboards
            namespace: kube-prometheus-stack
            app: grafana
            widget:
              type: grafana
              url: https://grafana.allanshomelab.com
              username: {{HOMEPAGE_VAR_GRAFANA_USERNAME}}
              password: {{HOMEPAGE_VAR_GRAFANA_PASSWORD}}
              fields: ['dashboards', 'datasources']

  widgets.yaml: |
    - greeting:
        text_size: xl
        text: "Allan's Home Lab"
    - datetime:
        text_size: xl
        format:
          dateStyle: full
          timeStyle: short
          hour12: false
  docker.yaml: |
    mizar:
      host: 192.168.86.112
      port: 2375
    regulus:
      host: 192.168.86.111
      port: 2375
