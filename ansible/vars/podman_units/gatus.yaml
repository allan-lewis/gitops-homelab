---
units:
  - name: gatus
    type: service
    content: |
      [Unit]
      Description=Gatus (Podman, native)
      After=network-online.target
      Wants=network-online.target

      [Service]
      Restart=always
      ExecStartPre=-/usr/bin/podman rm -f gatus
      ExecStart=/usr/bin/podman run --name gatus --replace \
        --network pasta \
        --cap-add=CAP_NET_RAW \
        -p 8080:8080 \
        -v {{ pod_units_apps_root | default('/home/' ~ pod_units_user ~ '/apps') }}/gatus/data:/data \
        -v {{ pod_units_apps_root | default('/home/' ~ pod_units_user ~ '/apps') }}/gatus/config:/config \
        twinproduction/gatus:v5.25.2
      ExecStop=/usr/bin/podman stop -t 10 gatus
      TimeoutStopSec=30

      [Install]
      WantedBy=default.target
